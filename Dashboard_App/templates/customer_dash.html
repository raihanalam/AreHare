{% extends 'dash_nav.html' %}
{% load static %}


{% block title %} Customer Dashboard {% endblock %}


{% block sidebar %}

<ul class="navbar-nav sidebar sidebar-dark accordion" id="accordionSidebar" style="background-color: rgb(87, 33, 138);">

    <!-- Sidebar - Brand -->
    <a class="sidebar-brand d-flex align-items-center justify-content-center" href="{% url 'Main_App:home_page' %}">
        <div class="sidebar-brand-icon rotate-n-15">
            <i class="fa-solid fa-mask-snorkel"></i>
        </div>
        <div class="sidebar-brand-text mx-3">AreHare</div>
    </a>

    <!-- Divider -->
    <hr class="sidebar-divider my-0">

    <!-- Nav Item - Dashboard -->
    <li class="nav-item active">
        <a class="nav-link" href="{% url 'Dashboard_App:dashboard' %}">
            <i class="fas fa-fw fa-tachometer-alt"></i>
            <span>Dashboard</span></a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider">

    <!-- Heading -->
    <div class="sidebar-heading">
        Actions
    </div>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true"
            aria-controls="collapseTwo">
            <img src="{% static 'images/blog.png' %}" alt="" height="30px" width="30px">
            <span>Posts</span>
        </a>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">

                <a class="collapse-item" href="{% url 'Main_App:active_post_list'%}">Active Posts</a>
                <a class="collapse-item" href="{% url 'Main_App:deactivated_post_list' %}">Deactivated Posts</a>
                <a class="collapse-item" href="{% url 'Main_App:my_posts' %}">All Posts</a>
            </div>
        </div>
    </li>

    <!-- Nav Item - Pages Collapse Menu -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#chatbox" aria-expanded="true"
            aria-controls="chatbox">
            <img src="{% static 'images/freelancer_icon.png' %}" alt="" height="30px" width="30px">
            <span>Chat Box</span>
        </a>
        <div id="chatbox" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">

                <a class="collapse-item" href="{% url 'Message_App:inbox' %}">Active Freelancers</a>

            </div>
        </div>
    </li>

    <!-- Nav Item - Utilities Collapse Menu -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities"
            aria-expanded="true" aria-controls="collapseUtilities">
            <img src="{% static 'images/wallet.png' %}" alt="" height="30px" width="30px">
            <span>Wallet</span>
        </a>
        <div id="collapseUtilities" class="collapse" aria-labelledby="headingUtilities" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <a class="collapse-item" href="{% url 'Wallet_App:all_payments'%}">Payments</a>
                <a class="collapse-item" href="{% url 'Wallet_App:all_deposits' %}">Deposits</a>
                <a class="collapse-item" href="{% url 'Wallet_App:pending_payments'%}">Pendings</a>
                <a class="collapse-item" href="{% url 'Wallet_App:wallet_page' %}">Other</a>
            </div>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#workplace" aria-expanded="true"
            aria-controls="collapseUtilities">
            <img src="{% static 'images/workplace.png' %}" alt="" height="30px" width="30px">
            <span>Workspace</span>
        </a>
        <div id="workplace" class="collapse" aria-labelledby="headingUtilities" data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <a class="collapse-item" href="{% url 'Wallet_App:unsuccess_checkouts' %}">Unsucceslsfull Orders</a>
                <a class="collapse-item" href="{% url 'Work_App:all_running_orders'%}">Running Orders</a>
                <a class="collapse-item" href="{% url 'Work_App:all_successfull_orders' %}">Succesfull Orders</a>
                <a class="collapse-item" href="{% url 'Work_App:all_orders'%}">All Orders</a>
            </div>
        </div>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider d-none d-md-block">

    <!-- Sidebar Toggler (Sidebar) -->
    <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
    </div>

</ul>


{% endblock %}

{% block dash_body_block %}

<div class="container-fluid">

    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>
    </div>

    <!-- Content Row -->
    <div class="row dash-menue mb-4">
        <div class="col-sm-3">
            <div class="dash-item border-bottom-secondary pb-3 card-body">
                <h3>Recent Offers</h3>
                <div class="smart-line"></div>
                <h4>{{recent_offers}}</h4>
                <a href="{% url 'Work_App:all_offers' %}" class="btn btn-md btn-info">See All</a>

            </div>
        </div>
        <div class="col-sm-3">
            <div class="dash-item border-bottom-info">
                <h3>Recent Bids</h3>
                <div class="smart-line"></div>
                <h4>{{recent_bids}}</h4>
                <a href="{% url 'Main_App:all_bids'%}" class="btn btn-md btn-info">See All</a>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="dash-item border-bottom-danger">
                <h3>Running Orders</h3>
                <div class="smart-line"></div>
                <h4>{{total_running_order}}</h4>
                <a href="{% url 'Work_App:all_running_orders'%}" class="btn btn-md btn-info">See All</a>

            </div>
        </div>

        <div class="col-sm-3">
            <div class="dash-item border-bottom-success">
                <h3>Balance</h3>
                <div class="smart-line"></div>
                <h4>&#2547; {{user.user_wallet.balance}}</h4>
                <a href="{% url 'Wallet_App:wallet_page' %}" class="btn btn-md btn-info">Wallet</a>
            </div>
        </div>
    </div>
    <br>
    <!-- Content Row -->
    <div class="row">

        <div class="col-lg-6 mb-4">
            <!-- Bar Chart -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Expense Overview</h6>
                </div>
                <div class="card-body">
                    <div class="chart-bar">
                        <canvas id="myBarChart"></canvas>
                    </div>
                    <hr>
                </div>
            </div>
        </div>

        <!-- Content Column -->
        <div class="col-lg-6 mb-4">

            <!-- Project Card Example -->
            {% if progress_items %}
            {% for item in progress_items %}
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Running Works Tracker</h6>
                </div>
                <div class="card-body">
                    <h4 class="small font-weight-bold">Order<span class="float-right">{{ item.percentage }}%</span></h4>
                    <div class="progress mb-4">
                        <div class="progress-bar {{ item.status }}" role="progressbar" style="width: {{ item.percentage }}%"
                            aria-valuenow="{{ item.percentage }}" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <!-- Add other progress bars here using the same loop structure -->
                </div>
            </div>
            {% endfor %}
            
            {% endif %}

            <!-- Color System -->

        </div>


    </div>

</div>

{% endblock %}