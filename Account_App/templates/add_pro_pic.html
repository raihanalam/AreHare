{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{%block title%} Change Profile Picture {% endblock %}

{% block body_block%}
<div class="container card p-5">

     <h3>Change Profile Picture</h3>
     <div class="smart-line mb-5"></div>
     <form method="POST" enctype="multipart/form-data" class="form-group" id="pro-form">
          <img src="" alt="" id="id_current_profile" class="rounded-circle" height="150px" width="150px">
          {{form | crispy}}
          {% csrf_token %}
          <br>
          <button type="submit" class="mt-3 btn btn-success btn-sm">Change Picture</button>
     </form>


</div>
<script>
     form = document.getElementById('pro-form')

     form.classList.add('d-flex', 'flex-column', 'justify-content-center', 'align-items-center')
     document.getElementById('id_profile_pic').classList.add('form-control', 'mt-5');
     current_img = document.getElementById('id_current_profile')
     lab = document.getElementById('div_id_profile_pic').childNodes
     try {

          lab[1].remove();
          lab[2].childNodes[0].remove();
          lab[2].classList.add('d-flex', 'flex-column', 'justify-content-center', 'align-items-center', 'mt-2')
          lab[2].childNodes[5].remove();
          lab[2].childNodes[5].remove();
          console.log(lab[2].childNodes[5])

     }
     catch {

     }
     var myATag = form.querySelector('a');
     if (myATag) {
          current_img.src = myATag.href;

     }
     else {
          current_img.src = "{% static '/images/avatar.png' %}";
     }

     myATag.remove();

</script>
{% endblock %}